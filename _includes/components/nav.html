<header class="site-header">
  <div class="mobile-overlay" id="mobileOverlay" onclick="toggleMenu()"></div>
  <button
    class="hamburger"
    id="hamburgerBtn"
    aria-label="Open menu"
    aria-controls="mobileMenu"
    aria-expanded="false"
    onclick="toggleMenu()"
  >
    <span></span><span></span><span></span>
  </button>

  <nav class="mobile-menu mobile-only" id="mobileMenu">
    <a href="/about">Origin</a>
    <a href="/library">Explore Music</a>
    <a href="/blog">Stories</a>
    <a href="/live">Live Radio</a>
    <a href="/shop/">Shop</a>
    <a href="/events">Events</a>
    <a href="https://twitch.tv/studiorich"
      ><img src="/assets/img/logos/twitch.svg" alt="Twitch"
    /></a>
    <a href="https://youtube.com/@Studio-Rich"
      ><img src="/assets/img/logos/youtube.svg" alt="YouTube"
    /></a>
    <a href="https://ko-fi.com/studiorich"
      ><img src="/assets/img/logos/kofi.svg" alt="Ko-fi"
    /></a>
    <a
      href="/reading-room/?pack=hollow&q=0&duration=30&rotate=1"
      target="_self"
    >
      <img src="/assets/ui/hollow-book.svg" alt="Reading Room" />
    </a>
  </nav>

  <div class="header-inner">
    <div class="logo">
      <a id="site-logo" href="/"
        ><img
          src="/assets/img/logos/studiorich-logo.svg"
          alt="StudioRich logo â€“ Studio Rich music visuals"
      /></a>
    </div>

    <script>
      // Check if we're on the homepage
      if (window.location.pathname === "/") {
        document
          .getElementById("site-logo")
          .setAttribute("href", "/coming-soon/");
      }
    </script>

    <nav class="main-nav">
      <ul>
        <li><a href="/about">Origin</a></li>
        <li><a href="/library">Explore Music</a></li>
        <li><a href="/blog">Stories</a></li>
        <li><a href="/live">Live Radio</a></li>
        <li><a href="/shop">Shop</a></li>
      </ul>
    </nav>

    <div class="header-icons">
      <a href="/events" class="hide-mobile" target="_blank">
        <img src="/assets/ui/calendar.svg" alt="Calendar" />
      </a>
      <a
        href="https://twitch.tv/studiorich"
        class="hide-mobile"
        target="_blank"
      >
        <img src="/assets/img/logos/twitch.svg" alt="Twitch" />
      </a>
      <a
        href="https://youtube.com/@Studio-Rich"
        class="hide-mobile"
        target="_blank"
      >
        <img src="/assets/img/logos/youtube.svg" alt="YouTube" />
      </a>
      <a href="https://ko-fi.com/studiorich" target="_blank">
        <img src="/assets/img/logos/kofi.svg" alt="Ko-fi" />
      </a>
      <a
        href="/reading-room/?pack=hollow&q=0&duration=30&rotate=1"
        target="_self"
      >
        <img src="/assets/ui/hollow-book.svg" alt="Reading Room" />
      </a>
    </div>
  </div>
</header>

<script>
  function toggleMenu() {
    const menu = document.getElementById("mobileMenu");
    const overlay = document.getElementById("mobileOverlay");
    const isOpen = menu.classList.toggle("open");

    overlay.classList.toggle("active", isOpen);
    document.body.classList.toggle("menu-open", isOpen);
  }

  // Auto-close on link click
  document.querySelectorAll(".mobile-menu a").forEach((link) => {
    link.addEventListener("click", () => {
      document.getElementById("mobileMenu").classList.remove("open");
      document.getElementById("mobileOverlay").classList.remove("active");
      document.body.classList.remove("menu-open");
    });
  });

  function toggleMenu(force) {
    const menu = document.getElementById("mobileMenu");
    const overlay = document.getElementById("mobileOverlay");
    const btn = document.getElementById("hamburgerBtn");

    const willOpen =
      typeof force === "boolean" ? force : !menu.classList.contains("open");
    menu.classList.toggle("open", willOpen);
    overlay.classList.toggle("active", willOpen);
    document.body.classList.toggle("menu-open", willOpen);
    if (btn) btn.setAttribute("aria-expanded", String(willOpen));
    menu.setAttribute("aria-hidden", String(!willOpen));
  }

  // Auto-close on link click (keep your version too)
  document.querySelectorAll("#mobileMenu a").forEach((link) => {
    link.addEventListener("click", () => toggleMenu(false));
  });

  // Close on ESC
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") toggleMenu(false);
  });
</script>
