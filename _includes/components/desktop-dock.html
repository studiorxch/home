<div class="dock">
  <a href="/library/" class="dock-item"
    ><img src="/assets/img/icons/music.webp" alt="Music"
  /></a>
  <a
    href="/category/reading-room-4.html?pack=hollow&q=0&duration=30&rotate=1"
    class="dock-item"
    ><img src="/assets/img/icons/shop.webp" alt="Shop"
  /></a>
  <a href="/blog/" class="dock-item"
    ><img src="/assets/img/icons/blog.webp" alt="Blog"
  /></a>
  <a href="#" class="dock-item" id="trash-can">
    <img src="/assets/img/icons/trash.webp" alt="Trash" />
  </a>
</div>

<div id="trash-window" class="window hidden">
  <div class="window-header">
    <span>Trash</span>
    <button id="close-trash">
      <img src="/assets/ui/x-button.svg" alt="Close" />
    </button>
  </div>
  <div class="window-body">
    {% assign trash_files = site.files | where: "folder", "trash" | sort: "date"
    %} {% for file in trash_files %}
    <div class="file-item">
      <img src="{{ file.icon }}" alt="icon" width="24" height="24" />
      <span>{{ file.filename }}</span>
      <small>{{ file.size }} Â· {{ file.kind }}</small>
      {% if file.comments %}
      <div class="file-comments">{{ file.comments | markdownify }}</div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
</div>
<script>
  const trashCan = document.getElementById("trash-can");
  const trashWindow = document.getElementById("trash-window");
  const closeTrash = document.getElementById("close-trash");
  const trashContents = document.getElementById("trash-contents");

  // Toggle window
  trashCan.addEventListener("click", (e) => {
    e.preventDefault();
    trashWindow.classList.toggle("hidden");
  });

  closeTrash.addEventListener("click", () => {
    trashWindow.classList.add("hidden");
  });

  // Enable dropping
  trashWindow.addEventListener("dragover", (e) => e.preventDefault());
  trashWindow.addEventListener("drop", (e) => {
    e.preventDefault();
    const itemId = e.dataTransfer.getData("text/plain");
    const el = document.getElementById(itemId);
    if (el) {
      el.remove();
      const li = document.createElement("div");
      li.textContent = `ðŸ—‘ï¸ ${itemId}`;
      trashContents.appendChild(li);
    }
  });

  // Make desktop icons draggable
  document.querySelectorAll(".desktop-icon").forEach((icon) => {
    icon.setAttribute("draggable", "true");
    icon.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("text/plain", icon.id);
    });
  });
</script>
