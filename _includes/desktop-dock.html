<div class="dock">
  <a href="/library/" class="dock-item"
    ><img src="/assets/icons/music.png" alt="Music"
  /></a>
  <a href="/shop/" class="dock-item"
    ><img src="/assets/icons/shop.png" alt="Shop"
  /></a>
  <a href="/blog/" class="dock-item"
    ><img src="/assets/icons/blog.png" alt="Blog"
  /></a>
  <a href="#" class="dock-item" id="trash-can">
    <img src="/assets/icons/trash.png" alt="Trash" />
  </a>
</div>
<div class="dock">DOCK TEST</div>

<div id="trash-window" class="window hidden">
  <div class="window-header">
    <span>Trash</span>
    <button id="close-trash">âœ•</button>
  </div>
  <div id="trash-contents" class="window-body">
    <div class="trash-item">ğŸ—‘ï¸ old_party_photo_83.jpg</div>
    <div class="trash-item">ğŸ—‘ï¸ unfinished_mix_v2.mp3</div>
    <div class="trash-item">ğŸ—‘ï¸ scan_1983_sleep_prank.jpg</div>
    <div class="trash-item">ğŸ—‘ï¸ empty_polaroid_scan_85.jpg</div>
  </div>
</div>
<script>
  const trashCan = document.getElementById("trash-can");
  const trashWindow = document.getElementById("trash-window");
  const closeTrash = document.getElementById("close-trash");
  const trashContents = document.getElementById("trash-contents");

  const starterTrash = [
    "old_party_photo_83.jpg",
    "unfinished_mix_v2.mp3",
    "scan_1983_sleep_prank.jpg",
    "empty_polaroid_scan_85.jpg",
  ];

  trashContents.innerHTML = ""; // clear placeholder
  starterTrash.forEach((file) => {
    const div = document.createElement("div");
    div.classList.add("trash-item");
    div.textContent = `ğŸ—‘ï¸ ${file}`;
    trashContents.appendChild(div);
  });

  // Toggle window
  trashCan.addEventListener("click", (e) => {
    e.preventDefault();
    trashWindow.classList.toggle("hidden");
  });

  closeTrash.addEventListener("click", () => {
    trashWindow.classList.add("hidden");
  });

  // Enable dropping
  trashWindow.addEventListener("dragover", (e) => e.preventDefault());
  trashWindow.addEventListener("drop", (e) => {
    e.preventDefault();
    const itemId = e.dataTransfer.getData("text/plain");
    const el = document.getElementById(itemId);
    if (el) {
      el.remove();
      const li = document.createElement("div");
      li.textContent = `ğŸ—‘ï¸ ${itemId}`;
      trashContents.appendChild(li);
    }
  });

  // Make desktop icons draggable
  document.querySelectorAll(".desktop-icon").forEach((icon) => {
    icon.setAttribute("draggable", "true");
    icon.addEventListener("dragstart", (e) => {
      e.dataTransfer.setData("text/plain", icon.id);
    });
  });
</script>
