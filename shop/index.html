---
layout: default
title: Shop
---

<div id="shop-grid" class="grid">
  {% assign products = site.data.printful %} {% if products and products.size >
  0 %} {% for p in products %}
  <a class="tile" href="/shop/{{ p.id }}/">
    <img
      src="{{ p.thumbnail | default: p.sync_product.thumbnail }}"
      alt="{{ p.name | default: p.sync_product.name }}"
      loading="lazy"
    />
    <div class="meta">
      <h3>{{ p.name | default: p.sync_product.name }}</h3>
    </div>
  </a>
  {% endfor %} {% else %}
  <p>No products yet.</p>
  {% endif %}
</div>

<script>
  const API = "https://studiorich-api.vercel.app/api/printful";
  (async () => {
    let products = [];
    try {
      products = await (await fetch(`${API}/products`)).json();
    } catch {
      try {
        products = await (await fetch("/assets/data/printful.json")).json();
      } catch (_) {}
    }
    if (!Array.isArray(products) || !products.length) return;
    const grid = document.getElementById("shop-grid");
    grid.innerHTML = products
      .map((p) => {
        const name = p.name || p.sync_product?.name || "Untitled";
        const id = p.id;
        const thumb = p.thumbnail || p.sync_product?.thumbnail || "";
        return `
      <a class="tile" href="/shop/${id}/">
        <img src="${thumb}" alt="${name}" loading="lazy">
        <div class="meta"><h3>${name}</h3></div>
      </a>`;
      })
      .join("");
  })();
</script>
