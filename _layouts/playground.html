
<!DOCTYPE html>
<html lang="en">
  <head>
    {% seo %}
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <meta name="theme-color" content="#0a0a0a" />

    {% include meta-head.html %}
    {% include head-links.html %}
    {% if jekyll.environment == "production" and site.google_analytics %}
      {% include google-analytics.html %}
    {% endif %}
    {% include jsonld-website.html %}
    {% include jsonld-playground-collection.html %}
  </head>

  <body class="playground">
    {% include components/nav.html %}
{% include components/feature-grid.html %}

    <main class="rail" id="rail" tabindex="0" aria-label="Playground carousel">
      {% assign slides = site.playground | sort:'path' %}

      {% for s in slides %}
        {% assign hero = s.image | default: s.img %}

        <section
          id="slide-{{ forloop.index }}"
          class="slide"
          data-fit="{{ s.fit | default:'cover' }}"
          data-pos="{{ s.pos | default:'center-bottom' }}"
          data-focus="{{ s.focus | default:'graphic' }}"
          style="--zoom: {{ s.zoom | default: 1 }}"
          aria-roledescription="slide"
          aria-label="{{ s.title | escape }}"
        >
          <div class="frame">
            {% if hero %}
              <img
                class="media"
                src="{{ hero | relative_url }}"
                alt="{{ s.title | escape }}"
                loading="lazy"
                {% if s.width %}width="{{ s.width }}"{% endif %}
                {% if s.height %}height="{{ s.height }}"{% endif %}
                style="object-fit: {{ s.fit | default:'cover' }}; object-position: {{ s.pos | default:'center bottom' }};"
              />
            {% endif %}

            {% if s.tags %}
              <div class="tags">
                {% for t in s.tags %}
                  {% assign cat = t.category | default:'info' %}
                  <a class="tag tag--{{ cat }}"
                     style="left: {{ t.x }}%; top: {{ t.y }}%;{% if t.icon %} --icon: url('{{ t.icon | relative_url }}');{% endif %}"
                     href="{{ t.href | default:'#' }}"
                     data-category="{{ cat }}"
                     {% if t.ref %}data-ref="{{ t.ref }}"{% endif %}
                     {% if t.cover %}data-cover="{{ t.cover | relative_url }}"{% endif %}
                     role="button" aria-label="{{ t.label | default:'View' }}">
                    <span class="tag__icon" aria-hidden="true"></span>
                    {% if t.label %}<span class="tag__tooltip">{{ t.label }}</span>{% endif %}
                  </a>
                {% endfor %}
              </div>
            {% endif %}
          </div>

          {% assign text_style = s.text_style | default:'overlay' %}
          {% if text_style == 'overlay' %}
            <div class="text-overlay {{ s.text_pos | default:'left' }}">
              <div class="caption-inner">
                {% if s.lines %}
                  <div class="mta-lines" aria-label="Subway lines">
                    {% for L in s.lines %}
                      <span class="mta-bullet line-{{ L | downcase }}">{{ L }}</span>
                    {% endfor %}
                  </div>
                {% endif %}

                {% if s.eyebrow %}<div class="eyebrow">{{ s.eyebrow }}</div>{% endif %}
                <h2 class="title">{{ s.title }}</h2>

                {% if s.playlist_ref %}
                  <button class="panel-play"
                          data-playlist-ref="{{ s.playlist_ref }}"
                          aria-label="Play this capsule">▶</button>
                {% endif %}

                {% if s.body %}<p class="body">{{ s.body }}</p>{% endif %}

                {% if s.cta %}
                  <div class="cta-row">
                    {% for c in s.cta %}
                      <a class="cta" href="{{ c.href }}" target="_blank" rel="noopener">
                        <small>{{ c.label }}</small> {{ c.text }}
                      </a>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endif %}
        </section>
      {% endfor %}
    </main>

    <div class="counter" id="counter">
      <span class="pill">1 / {{ slides | size }}</span>
    </div>
    <div class="nav" id="dots" role="tablist" aria-controls="rail"></div>

    <div class="edge left" id="edge-left"><button aria-label="Previous">‹</button></div>
    <div class="edge right" id="edge-right"><button aria-label="Next">›</button></div>

    {% include nowbar.html %}

    <!-- pins and slides first -->
    <script src="/assets/js/playground-tags.js" defer></script>
    <script src="/assets/js/carousel-playground.js" defer></script>
    <script src="/assets/js/station-chamber.js" defer></script>
    <script src="/assets/js/playground-edit.js" defer></script>

        {% include player-src.html %}

    <!-- unified player stack -->
    <script src="/assets/js/master-playlist.js"></script>         <!-- defines SRC -->
    <script src="/assets/js/player-unified.js" defer></script>
    <script src="/assets/js/tags-controller.js" defer></script>   <!-- ⭐/👕/ℹ️ behaviour -->

   <audio id="audio" preload="metadata"></audio>

   <div class="nowbar">
  <button id="npPrev" class="np-btn" aria-label="Previous" disabled>
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M7 12L20 4v16L7 12zM4 4h2v16H4z" fill="currentColor"/>
    </svg>
  </button>

  <button id="npPlay" class="np-btn" aria-label="Play/Pause">
    <svg id="iconPlay" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M8 5v14l11-7-11-7z" fill="currentColor"/>
    </svg>
  </button>

  <div class="np-meta">
    <div id="npPlaylist" class="np-playlist">Playlist • —</div>
    <div id="npTrack" class="np-track">Nothing queued</div>
  </div>

  <button id="npNext" class="np-btn" aria-label="Next" disabled>
    <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
      <path d="M17 12L4 4v16l13-8zM18 4h2v16h-2z" fill="currentColor"/>
    </svg>
  </button>
</div>


<!-- If your include already sets window.SRC, keep it.
     If not, you can inline a tiny default list here. -->
<script>
  window.SRC = window.SRC || [
    // swap these for real tracks that exist on PRODUCTION
    { title: "Echoes Under the Arches", artist: "StudioRich", url: "/assets/audio/playtracks/echoes-under-the-arches.mp3" },
    { title: "Straight to Canvas", artist: "StudioRich", url: "/assets/audio/playtracks/straight-to-canvas.mp3" },
    { title: "T-Shirt in Transit", artist: "StudioRich", url: "/assets/audio/playtracks/t-shirt-in-transit.mp3" }
  ];
</script>
<script src="/assets/js/player-lite.js" defer></script>



    </div>
  </body>
</html>
