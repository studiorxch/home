
<!DOCTYPE html>
<html lang="en">
  <head>
    {% seo %}
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <meta name="theme-color" content="#0a0a0a" />

    {% include meta-head.html %}
    {% include head-links.html %}
    {% if jekyll.environment == "production" and site.google_analytics %}
      {% include google-analytics.html %}
    {% endif %}
    {% include jsonld-website.html %}
    {% include jsonld-playground-collection.html %}
  </head>

  <body class="playground">
    {% include components/nav.html %}

    <main class="rail" id="rail" tabindex="0" aria-label="Playground carousel">
      {% assign slides = site.playground | sort:'path' %}


      <section id="slide-0"
         class="slide slide--features"
         data-focus="graphic"
         aria-roledescription="slide"
         aria-label="Featured">
          <div class="frame">
            <img class="media"
                src="/assets/img/hero/studio-rich-homepage-hero.webp"
                alt="Featured"
                loading="lazy"
                style="object-fit: cover; object-position: center;" />
          </div>

        {% comment %} Right-side notice tiles {% endcomment %}
 {% comment %}{% include components/feature-dock.html count=6 cols=1 size=56 pr="28px" show_blog=true collapsed=true %}{% endcomment %}

      </section>




      {% for s in slides %}
        {% assign hero = s.image | default: s.img %}

        <section
          id="slide-{{ forloop.index }}"
          class="slide"
          data-fit="{{ s.fit | default:'cover' }}"
          data-pos="{{ s.pos | default:'center-bottom' }}"
          data-focus="{{ s.focus | default:'graphic' }}"
          style="--zoom: {{ s.zoom | default: 1 }}"
          aria-roledescription="slide"
          aria-label="{{ s.title | escape }}"
        >
          <div class="frame">
            {% if hero %}
              <img
                class="media"
                src="{{ hero | relative_url }}"
                alt="{{ s.title | escape }}"
                loading="lazy"
                {% if s.width %}width="{{ s.width }}"{% endif %}
                {% if s.height %}height="{{ s.height }}"{% endif %}
                style="object-fit: {{ s.fit | default:'cover' }}; object-position: {{ s.pos | default:'center bottom' }};"
              />
            {% endif %}

            {% if s.tags %}
              <div class="tags">
                {% for t in s.tags %}
                  {% assign cat = t.category | default:'info' %}
                  <a class="tag tag--{{ cat }}"
                     style="left: {{ t.x }}%; top: {{ t.y }}%;{% if t.icon %} --icon: url('{{ t.icon | relative_url }}');{% endif %}"
                     href="{{ t.href | default:'#' }}"
                     data-category="{{ cat }}"
                     {% if t.ref %}data-ref="{{ t.ref }}"{% endif %}
                     {% if t.cover %}data-cover="{{ t.cover | relative_url }}"{% endif %}
                     role="button" aria-label="{{ t.label | default:'View' }}">
                    <span class="tag__icon" aria-hidden="true"></span>
                    {% if t.label %}<span class="tag__tooltip">{{ t.label }}</span>{% endif %}
                  </a>
                {% endfor %}
              </div>
            {% endif %}
          </div>

          {% assign text_style = s.text_style | default:'overlay' %}
          {% if text_style == 'overlay' %}
            <div class="text-overlay {{ s.text_pos | default:'left' }}">
              <div class="caption-inner">
                {% if s.lines %}
                  <div class="mta-lines" aria-label="Subway lines">
                    {% for L in s.lines %}
                      <span class="mta-bullet line-{{ L | downcase }}">{{ L }}</span>
                    {% endfor %}
                  </div>
                {% endif %}

                {% if s.eyebrow %}<div class="eyebrow">{{ s.eyebrow }}</div>{% endif %}
                <h2 class="title">{{ s.title }}</h2>

                {% if s.playlist_ref %}
                  <button class="panel-play"
                          data-playlist-ref="{{ s.playlist_ref }}"
                          aria-label="Play this capsule">▶</button>
                {% endif %}

                {% if s.body %}<p class="body">{{ s.body }}</p>{% endif %}

                {% if s.cta %}
                  <div class="cta-row">
                    {% for c in s.cta %}
                      <a class="cta" href="{{ c.href }}" target="_blank" rel="noopener">
                        <small>{{ c.label }}</small> {{ c.text }}
                      </a>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endif %}
        </section>
      {% endfor %}
    </main>

    <div class="counter" id="counter">
      <span class="pill">1 / {{ slides | size }}</span>
    </div>
    <div class="nav" id="dots" role="tablist" aria-controls="rail"></div>

    <div class="edge left" id="edge-left"><button aria-label="Previous">‹</button></div>
    <div class="edge right" id="edge-right"><button aria-label="Next">›</button></div>



    <!-- pins and slides first -->
    <script src="/assets/js/playground-tags.js" defer></script>
    <script src="/assets/js/carousel-playground.js" defer></script>
    <script src="/assets/js/station-chamber.js" defer></script>
    <script src="/assets/js/playground-edit.js" defer></script>


    


    <!-- fallback if no tracks were found -->
    <script>
      if (!Array.isArray(window.SRC) || window.SRC.length === 0) {
        window.SRC = [
          { title: "Echoes Under the Arches", artist: "StudioRich", url: "/assets/audio/playtracks/echoes-under-the-arches.mp3" },
          { title: "Straight to Canvas",      artist: "StudioRich", url: "/assets/audio/playtracks/straight-to-canvas.mp3" },
          { title: "T-Shirt in Transit",      artist: "StudioRich", url: "/assets/audio/playtracks/t-shirt-in-transit.mp3" }
        ];
        console.warn("Player: fallback queue loaded");
      }
    </script>






    <!-- unified player stack -->
    <!-- <script src="/assets/js/master-playlist.js"></script> -->
    <!-- <script src="/assets/js/player-unified.js" defer></script> -->

    <script src="/assets/js/tags-controller.js" defer></script>   <!-- ⭐/👕/ℹ️ behaviour -->



    </div>



{%- comment -%} Build window.SRC from _data/playtracks.yml {%- endcomment -%}
{% include player-src.html %}

{%- comment -%} Optional fallback if _data/playtracks.yml is empty {%- endcomment -%}
<script>
  if (!Array.isArray(window.SRC) || window.SRC.length === 0) {
    window.SRC = [
      { title: "Echoes Under the Arches", artist: "StudioRich", url: "/assets/audio/playtracks/echoes-under-the-arches.mp3" },
      { title: "Straight to Canvas",      artist: "StudioRich", url: "/assets/audio/playtracks/straight-to-canvas.mp3" },
      { title: "T-Shirt in Transit",      artist: "StudioRich", url: "/assets/audio/playtracks/t-shirt-in-transit.mp3" }
    ];
    console.warn("Player: fallback queue loaded");
  }
</script>

{%- comment -%} Player logic (reads window.SRC) {%- endcomment -%}
<script src="/assets/js/player-lite.js" defer></script>

{%- comment -%} The pill UI and the <audio id="audio"> element {%- endcomment -%}
{% include player-pill.html %}

  </body>
</html>
