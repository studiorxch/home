/* ================================
   StudioRich — Playground (rail, slides, tags, captions, grid)
   ================================ */

/* Vars (shared) */
:root{
  --bg:#0a0a0a;
  --slide-gap:0;
  --cap-mobile:475px;
  --cap-desktop:760px;
  --nowbar-h:52px; /* reserved for player footer */
}

/* Base */
body.playground{
  height:100%;
  margin:0;
  background:var(--bg);
  color:#eaeaea;
  font-family:Inter, ui-sans-serif, system-ui, -apple-system,"Segoe UI", Roboto, Arial;
  padding-bottom:var(--nowbar-h);
}

/* ===== Rail & Slides ===================================================== */


body.playground .rail {
  position: sticky;
  top: 0;
  height: 100vh;          /* fills viewport when reached */
  display: flex;
  gap: var(--slide-gap);
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  background: var(--bg);
  cursor: grab;
  scrollbar-gutter: stable overlay;
  scrollbar-width: none;
}

.playground .rail::-webkit-scrollbar{ display:none; }
.playground .rail.dragging{ cursor:grabbing; scroll-snap-type:none; }

.playground .slide{
  flex:0 0 100vw; scroll-snap-align:start; position:relative; min-height:100svh;
}

.playground .frame{ position:absolute; inset:0; }
.playground .frame .media{
  position:relative; z-index:0; width:100%; height:100%; display:block;
  object-fit:cover; object-position:center; -webkit-user-drag:none; user-select:none;
}

/* Focus helpers via data-attrs */
.playground .slide[data-focus="graphic"] .media{ object-position:center 60%; }
.playground .slide[data-focus="model"]   .media{ object-position:center 40%; }
.playground .slide[data-fit="contain"]   .media{ object-fit:contain; background:var(--bg); }

/* ===== Pins / Tags ======================================================= */
.playground .frame .tags{ position:absolute; inset:0; z-index:3; pointer-events:none; }
.playground .frame .tag{
  position:absolute; transform:translate(-50%,-50%); pointer-events:auto;
  width:40px; height:40px; border-radius:999px; display:grid; place-items:center;
  text-decoration:none; color:#fff; background:rgba(0,0,0,.55);
  border:1px solid rgba(255,255,255,.25); backdrop-filter:blur(6px);
}
.playground .frame .tag:hover{ background:rgba(0,0,0,.7); }

.tag__tooltip{
  position:absolute; top:-.5rem; left:50%; transform:translate(-50%,-100%);
  white-space:nowrap; background:rgba(0,0,0,.8); color:#fff; font-size:.8rem;
  padding:.25rem .5rem; border-radius:.4rem; opacity:0; pointer-events:none;
  transition:.15s; border:1px solid rgba(255,255,255,.15);
}
.tag:hover .tag__tooltip{ opacity:1; }

/* Category halo accents */
.tag--track  { box-shadow:0 0 0 2px rgba(255,215,0,.35) inset; }
.tag--product{ box-shadow:0 0 0 2px rgba(0,200,255,.32) inset; }
.tag--station{ box-shadow:0 0 0 2px rgba(180,120,255,.32) inset; }
.tag--track.is-added{ background:rgba(34,139,34,.78); }

/* Icon mask slot */
.tag .tag__icon{
  width:22px; height:22px; display:block; background-color:#fff;
  -webkit-mask:var(--icon) no-repeat center / contain;
          mask:var(--icon) no-repeat center / contain;
}

/* Optional cover preview */
.tag[data-cover]::before{
  content:""; position:absolute; left:50%; top:-8px; transform:translate(-50%,-100%);
  width:96px; height:96px; border-radius:10px;
  background:var(--cover-url) center/cover no-repeat;
  border:1px solid rgba(255,255,255,.16);
  box-shadow:0 6px 16px rgba(0,0,0,.35);
  opacity:0; pointer-events:none; transition:.15s;
}
.tag[data-cover]:hover::before{ opacity:1; }
.tag[data-cover]:hover .tag__tooltip{ transform:translate(-50%, calc(-100% - 110px)); }

/* ===== Text Overlay ====================================================== */
.playground .text-overlay{
  position:absolute; z-index:4; inset:auto 0 calc(var(--nowbar-h)  1rem) 0;
  max-width:clamp(36ch, 40vw, 60ch);
  margin:0 clamp(1rem, 4vw, 3rem);
  padding:clamp(.75rem, 1.5vw, 1rem) clamp(.9rem, 2vw, 1.25rem);
  color:#fff; background:rgba(0,0,0,.38); backdrop-filter:blur(6px);
  pointer-events:none;
}
.playground .text-overlay .caption-inner{ pointer-events:auto; }
.playground .text-overlay.left { left:clamp(1rem,4vw,3rem); right:auto; }
.playground .text-overlay.right{ right:clamp(1rem,4vw,3rem); left:auto; }

.text-overlay .eyebrow{ letter-spacing:.12em; opacity:.85; font-size:.8rem; text-transform:uppercase; }
.text-overlay .title{ margin:.25rem 0; font-size:clamp(1.25rem, 2.6vw, 2rem); line-height:1.1; }
.text-overlay .body{ opacity:.9; font-size:clamp(.95rem, 1.4vw, 1.05rem); }
.text-overlay .cta-row{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.65rem; }

/* ===== Dots / Counter / Edges =========================================== */
.playground .nav{
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(var(--nowbar-h)  12px);
  display:flex; gap:8px; z-index:35;
}
.playground .dot{ width:8px; height:8px; border-radius:999px; background:#3a3a3a; border:0; }
.playground .dot[aria-current="true"]{ background:#FCCC0A; }

.playground .counter{
  position:fixed; top:10px; right:14px; z-index:45; transition:opacity .35s, transform .35s;
}
.playground .counter .pill{
  background:rgba(0,0,0,.65); border:1px solid #222; color:#fff;
  padding:4px 8px; border-radius:999px; font-weight:700; font-size:.8rem;
}
.playground .counter.is-hidden{ opacity:0; transform:translateY(-6px); pointer-events:none; }

.playground .edge{
  position:fixed; top:0; bottom:0; width:80px; z-index:40;
  display:flex; align-items:center; justify-content:center;
  opacity:.12; transition:opacity .2s; pointer-events:auto;
}
.playground .edge:hover, .playground .edge.show{ opacity:1; }
.playground .edge.left{ left:0; } .playground .edge.right{ right:0; }
.playground .edge button{
  all:unset; width:44px; height:44px; border-radius:999px;
  background:rgba(0,0,0,.55); border:1px solid #222; color:#fff; font-size:22px;
  display:grid; place-items:center; cursor:pointer;
}
@media (pointer:coarse){ .playground .edge{ opacity:1; } }

/* ===== MTA Line Tokens (palette) ======================================== */
:root{
  --carmine:#8B2E2E; --amber-ochre:#D98E04; --gold:#C9A635; --sage:#4F7942;
  --indigo:#2E3A87; --plum:#5A2A6D; --bronze:#4B3621; --mint:#93C572;
  --patina:#43B3AE; --steel:#5A5A5A;
}
.mta-bullet{
  --token-color:#808A93; --alpha:68%; --blur:6px;
  display:inline-grid; place-items:center; width:1.5rem; height:1.5rem; border-radius:50%;
  font:700 .9rem/1 Inter, ui-sans-serif, system-ui, -apple-system,"Segoe UI", Roboto, Arial;
  color:#fff; text-align:center;
  background:color-mix(in srgb, var(--token-color) var(--alpha), transparent);
  border:1px solid color-mix(in srgb, var(--token-color) 35%, transparent);
  box-shadow:0 0 0 2px rgba(0,0,0,.20); backdrop-filter:blur(var(--blur)) saturate(120%);
}
.over-photo .mta-bullet{ --alpha:80%; }
.line-1,.line-2,.line-3{ --token-color:var(--carmine); }
.line-4,.line-5,.line-6{ --token-color:var(--sage); }
.line-a,.line-c,.line-e{ --token-color:var(--indigo); }
.line-b,.line-d,.line-f,.line-m{ --token-color:var(--amber-ochre); }
.line-n,.line-q,.line-r,.line-w{ --token-color:var(--gold); color:#111; }
.line-7{ --token-color:var(--plum); }
.line-j,.line-z{ --token-color:var(--bronze); }
.line-g{ --token-color:var(--mint); color:#111; }
.line-l{ --token-color:var(--patina); color:#111; }
.line-s{ --token-color:var(--steel); color:#fff; }

/* ===== Feature Grid (top-of-page cards) ================================== */
.feature-grid{
  display:grid; grid-template-columns:360px 1fr; gap:1.25rem; padding:1.25rem 1rem 0;
}
.feature-rail{ display:grid; grid-template-rows:1fr 1fr; gap:1.25rem; min-width:0; }
.feature-main{ min-width:0; }

.feature-card{
  position:relative; display:block; border-radius:16px; overflow:hidden;
  min-height:280px; background:#121212; background-size:cover; background-position:center;
  box-shadow:0 8px 24px rgba(0,0,0,.35); isolation:isolate;
}
.feature-card.big{ min-height:420px; }

.feature-overlay{ position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.08) 0%, rgba(0,0,0,.55) 65%, rgba(0,0,0,.75) 100%);
  z-index:0;
}
.feature-body{
  position:absolute; inset-inline:1.25rem; inset-block-end:1.25rem;
  z-index:1; color:#eee; text-shadow:0 2px 12px rgba(0,0,0,.45);
}
.feature-body .eyebrow{ font-size:.8rem; letter-spacing:.08em; text-transform:uppercase; opacity:.85; margin-bottom:.25rem; }
.feature-body .headline{ font-family:var(--font-serif,"Trirong",serif); font-weight:400; line-height:1.2; margin:0 0 .5rem; }
.feature-body .headline a{ color:#fff; text-decoration:none; }
.feature-body .headline a:hover{ text-decoration:underline; }
.feature-body .sub{ margin:0 0 .75rem; color:#d6d6d6; max-width:60ch; }
.feature-body .btn{
  display:inline-block; padding:.6rem .9rem; border-radius:999px;
  background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.18);
  color:#fff; text-decoration:none; font-size:.9rem; backdrop-filter:blur(6px);
}
.feature-body .btn:hover{ background:rgba(255,255,255,.18); }

/* Tag color accents on cards */
.feature-library .eyebrow{ color:#9ad5ff; }
.feature-live    .eyebrow{ color:#ffd29a; }
.feature-shop    .eyebrow{ color:#c6ffa0; }
.feature-cat     .eyebrow{ color:#f8a7d0; }

/* Responsive */
@media (max-width:1100px){
  .feature-grid{ grid-template-columns:1fr; }
  .feature-rail{ grid-template-rows:none; grid-template-columns:1fr 1fr; }
  .feature-card.big{ min-height:360px; }
}
@media (max-width:680px){
  .feature-rail{ grid-template-columns:1fr; }
  .feature-grid{ gap:1rem; padding:1rem .75rem 0; }
  .feature-card{ min-height:240px; }
  .feature-card.big{ min-height:300px; }
  .feature-body{ inset-inline:1rem; inset-block-end:1rem; }
}


/* ===== Feature Dock (right-side notices) ================================ */

.slide--features .feature-dock{
  position: absolute;
  top: clamp(72px, 12vh, 120px);
  right: clamp(16px, 3vw, 28px);
  display: grid;
  grid-auto-rows: 1fr;
  grid-template-columns: 1fr;
  gap: 14px;
  z-index: 6;
  width: min(360px, 28vw);
  pointer-events: none; /* cards enable their own */
}

.notice-card{
  --size: 120px;                 /* base square size */
  pointer-events: auto;
  position: relative;
  display: grid;
  align-content: end;
  inline-size: 100%;
  min-block-size: var(--size);
  aspect-ratio: 1 / 1;
  border-radius: 14px;
  overflow: hidden;
  color: #fff;
  text-decoration: none;
  box-shadow: 0 8px 24px rgba(0,0,0,.35);
  background:
    linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.55) 70%) ,
    var(--bg) center / cover no-repeat;
  border: 1px solid rgba(255,255,255,.12);
  transition: transform .18s ease, box-shadow .18s ease;
}

.notice-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(0,0,0,.45);
}

.notice-card .notice-eyebrow{
  position: absolute; top: 8px; left: 10px;
  font-size: .72rem; letter-spacing: .08em; text-transform: uppercase;
  background: rgba(0,0,0,.45);
  padding: .2rem .45rem; border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
}

.notice-card .notice-title{
  font-family: var(--font-serif, "Trirong", serif);
  font-weight: 400;
  line-height: 1.15;
  font-size: .95rem;
  padding: .6rem .7rem .7rem;
  text-shadow: 0 2px 10px rgba(0,0,0,.5);
}

/* wide variant (for latest blog) – still compact */
.notice-card.is-wide{
  aspect-ratio: 16 / 10;
  min-block-size: 0;
}

/* Mobile: convert the stack to a bottom row you can swipe */
@media (max-width: 780px){
  .slide--features .feature-dock{
    right: 0; left: 0; bottom: calc(var(--nowbar-h) + 10px);
    top: auto;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 44vw;
    width: 100%;
    overflow-x: auto;
    padding: 0 12px;
    gap: 12px;
  }
  .notice-card{ --size: 34vw; }
  .notice-card.is-wide{ grid-auto-columns: 64vw; aspect-ratio: 16/10; }
}
.feature-dock{
  position:absolute; right:clamp(12px,3vw,24px); top:clamp(84px,8vh,120px);
  display:grid;
  grid-template-columns:repeat(var(--dock-cols,2), minmax(0,1fr));
  gap:12px;
  width:min(520px,38vw);
  max-height:calc(100svh - var(--nowbar-h) - 24px);
  overflow:auto;
}

.notice-card{
  display:grid; align-content:end;
  min-block-size:var(--notice-size,96px);
  aspect-ratio:1 / 1;
  padding:.6rem;
  border-radius:14px;
  background:rgba(0,0,0,.2);
  background-image:var(--bg);
  background-size:cover; background-position:center;
  border:1px solid rgba(255,255,255,.14);
  box-shadow:0 6px 18px rgba(0,0,0,.35);
  text-decoration:none; color:#fff;
}
.notice-eyebrow{ font-size:.7rem; opacity:.8; letter-spacing:.08em; text-transform:uppercase; }
.notice-title{ font-weight:600; text-shadow:0 2px 10px rgba(0,0,0,.4); }
